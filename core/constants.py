"""
Константы приложения.

Все магические числа собраны в одном месте.
Легко найти, понять и изменить.
"""
import numpy as np
# ============================================================
# ГЕОМЕТРИЯ ТРЕУГОЛЬНИКА
# ============================================================

# Высота равностороннего треугольника со стороной 1
TRIANGLE_HEIGHT = np.sqrt(3) / 2

# Отступы для отображения (чтобы метки не обрезались)
PLOT_MARGIN = 0.15

# Отступ подписей вершин от точки
VERTEX_LABEL_OFFSET = 0.05

# Отступ подписей составов от точки
COMP_LABEL_OFFSET = 0.03


# ============================================================
# ЧИСЛЕННЫЕ ДОПУСКИ (EPSILON)
# ============================================================

# Проверка на ноль (деление, длина вектора)
# Используется: len_sq < EPSILON_ZERO
EPSILON_ZERO = 1e-12

# Проверка точки на границе треугольника
# Используется: if value >= -EPSILON_BOUNDARY
EPSILON_BOUNDARY = 1e-9

# Сравнение двух точек на совпадение
# Используется: if distance < EPSILON_COINCIDENT
EPSILON_COINCIDENT = 1e-5

# Точность для поиска целочисленных соотношений (0.5%)
RATIO_TOLERANCE = 0.005


# ============================================================
# ЛИМИТЫ ЗНАЧЕНИЙ
# ============================================================

# Сетка
GRID_STEP_MIN = 0.01
GRID_STEP_MAX = 0.5
GRID_STEP_DEFAULT = 0.1

# Размер маркера
MARKER_SIZE_MIN = 0.5
MARKER_SIZE_MAX = 50.0
MARKER_SIZE_DEFAULT = 8.0

# Толщина линии
LINE_WIDTH_MIN = 0.5
LINE_WIDTH_MAX = 10.0
LINE_WIDTH_DEFAULT = 2.0

# Максимальное число в соотношении (например, 2:3 ок, 17:23 — слишком сложно)
RATIO_MAX_VALUE = 15

# Максимальный знаменатель при поиске соотношений
RATIO_MAX_DENOMINATOR = 50

# Максимальная длина имени состава
COMP_NAME_MAX_LENGTH = 100

# ============================================================
# ЦВЕТА ПО УМОЛЧАНИЮ
# ============================================================

COLOR_DEFAULT_COMP = "#000000"
COLOR_DEFAULT_LINE = "#1f77b4"
COLOR_BACKGROUND = "#FFFFFF"

# Overlay
COLOR_PROJECTION = "blue"
COLOR_INTERSECTION = "red"
COLOR_EXTRAPOLATION = "gray"
COLOR_TERNARY_TRIANGLE = "green"


# ============================================================
# Z-ORDER (порядок отрисовки)
# ============================================================

ZORDER_GRID = 1
ZORDER_LINES = 2
ZORDER_COMPS = 5
ZORDER_OVERLAY = 10
ZORDER_INTERSECTION = 100
ZORDER_PROJECTION = 101
